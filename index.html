<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Table to Markdown Converter</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="title-section">
                    <h1>Table to Markdown Converter</h1>
                    <button id="helpBtn" class="help-icon" title="ヘルプ">?</button>
                </div>
                <a href="https://github.com/isamuJazz/table2markdown" target="_blank" class="github-link" title="View on GitHub">
                    <svg width="32" height="32" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                </a>
            </div>
            <p>Edit table and convert to Markdown in real-time</p>
            <p class="commit-hash">__COMMIT_HASH__</p>
        </header>

        <div class="main-content">
            <div class="editor-section">
                <div class="controls">
                    <button id="modeIndicator" class="mode-indicator">ノーマルモード</button>
                    <button id="clearBtn" class="btn-clear">Clear All</button>
                </div>

                <div class="table-container">
                    <div class="table-wrapper" id="tableWrapper">
                        <!-- Table will be generated by JavaScript -->
                    </div>
                </div>
            </div>

            <div class="output-section">
                <div class="output-header">
                    <h2>Markdown</h2>
                    <div class="output-buttons">
                        <button id="applyBtn" class="btn-apply">反映</button>
                        <button id="copyBtn" class="btn-copy">Copy</button>
                    </div>
                </div>
                <pre id="markdownOutput" contenteditable="true"></pre>
                <div id="copyNotification" class="notification">Copied!</div>
            </div>
        </div>

        <footer>
            <p>Make Markdown tables easily</p>
        </footer>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <button class="modal-close" id="modalCloseBtn">&times;</button>
            <h2>使い方</h2>

            <section class="help-section">
                <h3>基本操作</h3>
                <ul>
                    <li><strong>テーブル編集：</strong> セルをクリックして編集します</li>
                    <li><strong>行・列の追加：</strong> +ボタンで新しい行・列を挿入（現在位置に挿入され、既存の行・列は下/右に移動）</li>
                    <li><strong>行・列の削除：</strong> −ボタンで削除</li>
                </ul>
            </section>

            <section class="help-section">
                <h3>モード切替（Vim風）</h3>
                <ul>
                    <li><strong>ノーマルモード：</strong> セルの移動とドラッグ&ドロップが可能
                        <ul>
                            <li><kbd>h</kbd> <kbd>j</kbd> <kbd>k</kbd> <kbd>l</kbd> または矢印キーで移動</li>
                            <li><kbd>Tab</kbd> / <kbd>Shift+Tab</kbd> で左右移動</li>
                            <li>セルをドラッグして入れ替え</li>
                            <li><kbd>i</kbd> で編集モードへ</li>
                            <li><kbd>v</kbd> でビジュアルモードへ</li>
                            <li><kbd>d</kbd> でセルの内容を削除</li>
                            <li><kbd>x</kbd> でセルの内容をカット（クリップボードに保存）</li>
                            <li><kbd>y</kbd> でセルの内容をヤンク（コピー）</li>
                            <li><kbd>p</kbd> でクリップボードの内容をペースト</li>
                            <li><kbd>u</kbd> で直前の操作をアンドゥ</li>
                        </ul>
                    </li>
                    <li><strong>編集モード：</strong> テキスト編集が可能
                        <ul>
                            <li><kbd>Esc</kbd> でノーマルモードへ戻る</li>
                        </ul>
                    </li>
                    <li><strong>ビジュアルモード：</strong> 矩形選択とバッチ操作が可能
                        <ul>
                            <li><kbd>h</kbd> <kbd>j</kbd> <kbd>k</kbd> <kbd>l</kbd> または矢印キーで選択範囲を拡張</li>
                            <li><kbd>d</kbd> で選択範囲を削除</li>
                            <li><kbd>x</kbd> で選択範囲をカット</li>
                            <li><kbd>y</kbd> で選択範囲をヤンク</li>
                            <li><kbd>p</kbd> で選択範囲にペースト</li>
                            <li><kbd>Esc</kbd> でノーマルモードへ戻る</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <section class="help-section">
                <h3>テキスト配置</h3>
                <p>ヘッダー上部のボタンで列の配置を変更：</p>
                <ul>
                    <li><strong>←：</strong> 左寄せ</li>
                    <li><strong>↔：</strong> 中央寄せ</li>
                    <li><strong>→：</strong> 右寄せ</li>
                </ul>
            </section>

            <section class="help-section">
                <h3>Markdown反映</h3>
                <ul>
                    <li>右側のMarkdownエリアは編集可能です</li>
                    <li><strong>「反映」ボタン：</strong> Markdownの内容をテーブルに反映</li>
                    <li><strong>「Copy」ボタン：</strong> Markdownをクリップボードにコピー</li>
                </ul>
            </section>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
